function CanvasDrawing(d,b){function a(a){var b=null,f=null;if(a.offset)f=a.offset(),b=f.x,f=f.y;else if(a.touches&&a.touches[0]&&a.touches[0].pageX&&a.touches[0].pageY)try{var h=$(c.canvas).offset(),b=a.touches[0].pageX-h.left,f=a.touches[0].pageY-h.top}catch(i){console.log(i),console.log(a)}a.preventDefault&&a.srcElement&&a.srcElement.id==d&&a.preventDefault();if(b&&f)switch(a.type){case "mousedown":case "onmousedown":c.drawStart(b,f);break;case "mousemove":case "onmousemove":c.draw(b,f);break;
case "touchmove":c.drawing||c.drawStart(b,f);c.draw(b,f);break;case "touchstart":c.drawStart(b,f);break;case "touchend":c.drawStop();break;case "mouseup":case "onmouseup":c.drawStop();break;case "mouseout":c.drawPause();break;case "mouseover":c.drawResume(b,f)}}var c=CanvasDrawing.prototype;c.options={brush:"marker",lineWidth:2,color:"#000","background-color":"white",freeDrawing:!0,smoothBrush:!0}.merge(b);c.canvas=document.getElementById(d);c.context=c.canvas.getContext("2d");c.context.fillStyle=
c.options["background-color"];c.context.fillRect(0,0,c.canvas.width,c.canvas.height);c.options.freeDrawing&&(c.canvas.addEventListener?(c.canvas.addEventListener("mousedown",a,!0),c.canvas.addEventListener("mousemove",a,!0),c.canvas.addEventListener("mouseout",a,!0),c.canvas.addEventListener("mouseover",a,!0),document.addEventListener("mouseup",a,!0),c.canvas.addEventListener("touchstart",a,!0),c.canvas.addEventListener("touchmove",a,!0),document.addEventListener("touchend",a,!0)):(c.canvas.attachEvent("onmousedown",
a),c.canvas.attachEvent("onmousemove",a),document.attachEvent("onmouseup",a)))}CanvasDrawing.prototype.setOption=function(d,b){var a=CanvasDrawing.prototype;if(!a.options.hasOwnProperty(d))throw"Invalid CanvasDrawing option: '"+d+"'";d==="lineWidth"&&b<0.1&&(b=0.1);a.options[d]=b};
CanvasDrawing.prototype.drawStart=function(d,b){var a=CanvasDrawing.prototype;a.drawing=!0;a.context.strokeStyle=a.options.color;a.context.fillStyle=a.options.color;a.context.lineWidth=a.options.lineWidth;a.oldX=d;a.oldY=b;a.brush[a.options.brush](d+0.001,b+0.001)};CanvasDrawing.prototype.draw=function(d,b){var a=CanvasDrawing.prototype;if(a.drawing)a.brush[a.options.brush](d,b);a.oldX=d;a.oldY=b};
CanvasDrawing.prototype.brush={cd:CanvasDrawing.prototype,reset:function(){this.cd.context.lineCap="butt";this.cd.context.lineJoin="miter";this.cd.context.shadowOffsetX=0;this.cd.context.shadowOffsetY=0;this.cd.context.shadowBlur=0;this.cd.context.shadowColor="transparent black";this.cd.context.globalAlpha=1},fill:function(){this.reset();this.cd.context.fillStyle=this.cd.options.color;this.cd.context.fillRect(0,0,this.cd.canvas.width,this.cd.canvas.height)},drawLine:function(d,b){var a=this.cd,c,
g,e,f;a.context.beginPath();a.context.moveTo(a.oldX,a.oldY);if(a.options.smoothBrush){c=Math.abs(d-a.oldX);g=Math.abs(b-a.oldY);this.cp={x:d,y:b};if(c+g>10)e=this.lastcp?this.lastcp.x:a.oldX,f=this.lastcp?this.lastcp.y:a.oldY,c=a.oldX-e,g=a.oldY-f,this.cp={x:e+c*1.4,y:f+g*1.4};this.lastcp={x:this.cp.x,y:this.cp.y};a.context.bezierCurveTo(this.cp.x,this.cp.y,d,b,d,b)}else a.context.moveTo(a.oldX,a.oldY),a.context.lineTo(d,b);a.context.stroke()},marker:function(d,b){this.reset();var a=this.cd;a.context.globalAlpha=
1;a.context.lineCap="round";this.drawLine(d,b)},spray:function(d,b){this.reset();var a,c,g;for(a=0;a<this.cd.options.lineWidth*3;a++)c=Math.random()*this.cd.options.lineWidth/2,g=Math.random()*this.cd.options.lineWidth/2,this.cd.context.fillRect(d-c,b-g,1,1),this.cd.context.fillRect(d+c,b-g,1,1),this.cd.context.fillRect(d-c,b+g,1,1),this.cd.context.fillRect(d+c,b+g,1,1)}};CanvasDrawing.prototype.drawPause=function(){var d=CanvasDrawing.prototype;if(d.drawing)d.paused=!0};
CanvasDrawing.prototype.drawResume=function(d,b){var a=CanvasDrawing.prototype;if(a.paused)a.oldX=d,a.oldY=b};CanvasDrawing.prototype.drawStop=function(){CanvasDrawing.prototype.drawing=!1};CanvasDrawing.prototype.clearCanvas=function(){var d=CanvasDrawing.prototype;d.drawing=!1;d.context.globalAlpha=1;d.context.fillStyle=d.options["background-color"];d.context.fillRect(0,0,d.canvas.width,d.canvas.height)};
Object.prototype.merge=function(d){var b;typeof d==="undefined"&&(d={});for(b in this)this.hasOwnProperty(b)&&!(b in d)&&(d[b]=this[b]);return d};
MouseEvent.prototype.offset=function(){var d,b;this.offsetX||this.offsetY?(d=this.offsetX,b=this.offsetY):(this.pageX||this.pageY?(d=this.pageX,b=this.pageY):(d=this.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,b=this.clientY+document.body.scrollTop+document.documentElement.scrollTop),d-=this.target.offsetLeft,b-=this.target.offsetTop);return{x:d,y:b}};
(function(d){d.version="0.8.4";d.protocol=1;d.transports=[];d.j=[];d.sockets={};d.connect=function(b,a){var c=d.util.parseUri(b),g,e;if("undefined"!=typeof document)c.protocol=c.protocol||document.location.protocol.slice(0,-1),c.host=c.host||document.domain,c.port=c.port||document.location.port;g=d.util.uniqueUri(c);var f={host:c.host,secure:"https"==c.protocol,port:c.port||("https"==c.protocol?443:80),query:c.query||""};d.util.merge(f,a);if(f["force new connection"]||!d.sockets[g])e=new d.Socket(f);
!f["force new connection"]&&e&&(d.sockets[g]=e);e=e||d.sockets[g];return e.of(c.path.length>1?c.path:"")}})("object"===typeof module?module.exports:window.io={});
(function(d,b){var a=d.util={},c=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,g="source,protocol,authority,userInfo,user,password,host,port,relative,path,directory,file,query,anchor".split(",");a.parseUri=function(a){for(var a=c.exec(a||""),b={},e=14;e--;)b[g[e]]=a[e]||"";return b};a.uniqueUri=function(a){var c=a.protocol,e=a.host,a=a.port;"document"in
b?(e=e||document.domain,a=a||(c=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(e=e||"localhost",!a&&c=="https"&&(a=443));return(c||"http")+"://"+e+":"+(a||80)};a.query=function(b,c){var e=a.chunkQuery(b||""),g=[];a.merge(e,a.chunkQuery(c||""));for(var d in e)e.hasOwnProperty(d)&&g.push(d+"="+e[d]);return g.length?"?"+g.join("&"):""};a.chunkQuery=function(a){for(var b={},a=a.split("&"),c=0,e=a.length,g;c<e;++c)g=a[c].split("="),g[0]&&(b[g[0]]=decodeURIComponent(g[1]));
return b};var e=!1;a.load=function(c){if("document"in b&&document.readyState==="complete"||e)return c();a.on(b,"load",c,!1)};a.on=function(a,c,b,e){a.attachEvent?a.attachEvent("on"+c,b):a.addEventListener&&a.addEventListener(c,b,e)};a.request=function(c){if("undefined"!=typeof window){if(c&&window.XDomainRequest)return new XDomainRequest;if(window.XMLHttpRequest&&(!c||a.ua.hasCORS))return new XMLHttpRequest;if(!c)try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}return null};"undefined"!=
typeof window&&a.load(function(){e=!0});a.defer=function(c){if(!a.ua.webkit)return c();a.load(function(){setTimeout(c,100)})};a.merge=function(c,b,e,g){var g=g||[],e=typeof e=="undefined"?2:e,d;for(d in b)b.hasOwnProperty(d)&&a.indexOf(g,d)<0&&(typeof c[d]!=="object"||!e?(c[d]=b[d],g.push(b[d])):a.merge(c[d],b[d],e-1,g));return c};a.mixin=function(c,b){a.merge(c.prototype,b.prototype)};a.inherit=function(a,c){function b(){}b.prototype=c.prototype;a.prototype=new b};a.isArray=Array.isArray||function(a){return Object.prototype.toString.call(a)===
"[object Array]"};a.intersect=function(c,b){for(var e=[],g=c.length>b.length?c:b,d=c.length>b.length?b:c,k=0,r=d.length;k<r;k++)~a.indexOf(g,d[k])&&e.push(d[k]);return e};a.indexOf=function(a,c,b){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(a,c,b);for(var e=a.length,b=b<0?b+e<0?0:b+e:b||0;b<e&&a[b]!==c;b++);return e<=b?-1:b};a.toArray=function(a){for(var b=[],c=0,e=a.length;c<e;c++)b.push(a[c]);return b};a.ua={};a.ua.hasCORS="undefined"!=typeof window&&window.XMLHttpRequest&&function(){try{var a=
new XMLHttpRequest}catch(b){return!1}return a.withCredentials!=void 0}();a.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)})("undefined"!=typeof window?io:module.exports,this);
(function(d,b){function a(){}d.EventEmitter=a;a.prototype.on=function(a,g){if(!this.$events)this.$events={};this.$events[a]?b.util.isArray(this.$events[a])?this.$events[a].push(g):this.$events[a]=[this.$events[a],g]:this.$events[a]=g;return this};a.prototype.addListener=a.prototype.on;a.prototype.once=function(a,b){function e(){f.removeListener(a,e);b.apply(this,arguments)}var f=this;e.listener=b;this.on(a,e);return this};a.prototype.removeListener=function(a,g){if(this.$events&&this.$events[a]){var e=
this.$events[a];if(b.util.isArray(e)){for(var f=-1,d=0,i=e.length;d<i;d++)if(e[d]===g||e[d].listener&&e[d].listener===g){f=d;break}if(f<0)return this;e.splice(f,1);e.length||delete this.$events[a]}else(e===g||e.listener&&e.listener===g)&&delete this.$events[a]}return this};a.prototype.removeAllListeners=function(a){this.$events&&this.$events[a]&&(this.$events[a]=null);return this};a.prototype.listeners=function(a){if(!this.$events)this.$events={};this.$events[a]||(this.$events[a]=[]);b.util.isArray(this.$events[a])||
(this.$events[a]=[this.$events[a]]);return this.$events[a]};a.prototype.emit=function(a){if(!this.$events)return!1;var g=this.$events[a];if(!g)return!1;var e=Array.prototype.slice.call(arguments,1);if("function"==typeof g)g.apply(this,e);else if(b.util.isArray(g))for(var g=g.slice(),f=0,d=g.length;f<d;f++)g[f].apply(this,e);else return!1;return!0}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(d,b){function a(a){return a<10?"0"+a:a}function c(a){h.lastIndex=0;return h.test(a)?'"'+a.replace(h,function(a){var b=m[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function g(b,e){var f,d,h,m,o=i,q,p=e[b];p instanceof Date&&(p=isFinite(b.valueOf())?b.getUTCFullYear()+"-"+a(b.getUTCMonth()+1)+"-"+a(b.getUTCDate())+"T"+a(b.getUTCHours())+":"+a(b.getUTCMinutes())+":"+a(b.getUTCSeconds())+"Z":null);typeof k==="function"&&(p=k.call(e,
b,p));switch(typeof p){case "string":return c(p);case "number":return isFinite(p)?String(p):"null";case "boolean":case "null":return String(p);case "object":if(!p)return"null";i+=n;q=[];if(Object.prototype.toString.apply(p)==="[object Array]"){m=p.length;for(f=0;f<m;f+=1)q[f]=g(f,p)||"null";h=q.length===0?"[]":i?"[\n"+i+q.join(",\n"+i)+"\n"+o+"]":"["+q.join(",")+"]";i=o;return h}if(k&&typeof k==="object"){m=k.length;for(f=0;f<m;f+=1)typeof k[f]==="string"&&(d=k[f],(h=g(d,p))&&q.push(c(d)+(i?": ":
":")+h))}else for(d in p)Object.prototype.hasOwnProperty.call(p,d)&&(h=g(d,p))&&q.push(c(d)+(i?": ":":")+h);h=q.length===0?"{}":i?"{\n"+i+q.join(",\n"+i)+"\n"+o+"}":"{"+q.join(",")+"}";i=o;return h}}if(b&&b.parse)return d.JSON={parse:b.parse,stringify:b.stringify};var e=d.JSON={},f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
i,n,m={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;e.stringify=function(a,b,c){var e;n=i="";if(typeof c==="number")for(e=0;e<c;e+=1)n+=" ";else typeof c==="string"&&(n=c);if((k=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return g("",{"":a})};e.parse=function(a,b){function c(a,e){var f,g,d=a[e];if(d&&typeof d==="object")for(f in d)Object.prototype.hasOwnProperty.call(d,f)&&(g=c(d,f),g!==void 0?
d[f]=g:delete d[f]);return b.call(a,e,d)}var e,a=String(a);f.lastIndex=0;f.test(a)&&(a=a.replace(f,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),typeof b==="function"?c({"":e},""):e;throw new SyntaxError("JSON.parse");}})("undefined"!=typeof io?io:module.exports,
typeof JSON!=="undefined"?JSON:void 0);
(function(d,b){var a=d.parser={},c=a.packets="disconnect,connect,heartbeat,message,json,event,ack,error,noop".split(","),g=a.reasons=["transport not supported","client not handshaken","unauthorized"],e=a.advice=["reconnect"],f=b.JSON,h=b.util.indexOf;a.encodePacket=function(a){var b=h(c,a.type),d=a.id||"",i=a.endpoint||"",z=a.ack,s=null;switch(a.type){case "error":var t=a.reason?h(g,a.reason):"",a=a.advice?h(e,a.advice):"";if(t!==""||a!=="")s=t+(a!==""?"+"+a:"");break;case "message":if(a.data!=="")s=
a.data;break;case "event":s={name:a.name};if(a.args&&a.args.length)s.args=a.args;s=f.stringify(s);break;case "json":s=f.stringify(a.data);break;case "connect":if(a.qs)s=a.qs;break;case "ack":s=a.ackId+(a.args&&a.args.length?"+"+f.stringify(a.args):"")}b=[b,d+(z=="data"?"+":""),i];s!==null&&s!==void 0&&b.push(s);return b.join(":")};a.encodePayload=function(a){var b="";if(a.length==1)return a[0];for(var c=0,e=a.length;c<e;c++)b+="\ufffd"+a[c].length+"\ufffd"+a[c];return b};var i=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;
a.decodePacket=function(a){var b=a.match(i);if(!b)return{};var d=b[2]||"",a=b[5]||"",h={type:c[b[1]],endpoint:b[4]||""};if(d)h.id=d,h.ack=b[3]?"data":!0;switch(h.type){case "error":b=a.split("+");h.reason=g[b[0]]||"";h.advice=e[b[1]]||"";break;case "message":h.data=a||"";break;case "event":try{var z=f.parse(a);h.name=z.name;h.args=z.args}catch(s){}h.args=h.args||[];break;case "json":try{h.data=f.parse(a)}catch(t){}break;case "connect":h.qs=a||"";break;case "ack":if(b=a.match(/^([0-9]+)(\+)?(.*)/))if(h.ackId=
b[1],h.args=[],b[3])try{h.args=b[3]?f.parse(b[3]):[]}catch(w){}}return h};a.decodePayload=function(b){if(b.charAt(0)=="\ufffd"){for(var c=[],e=1,f="";e<b.length;e++)b.charAt(e)=="\ufffd"?(c.push(a.decodePacket(b.substr(e+1).substr(0,f))),e+=Number(f)+1,f=""):f+=b.charAt(e);return c}else return[a.decodePacket(b)]}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(d,b){function a(a,b){this.socket=a;this.sessid=b}d.Transport=a;b.util.mixin(a,b.EventEmitter);a.prototype.onData=function(a){this.clearCloseTimeout();this.setCloseTimeout();if(a!==""&&(a=b.parser.decodePayload(a))&&a.length)for(var d=0,e=a.length;d<e;d++)this.onPacket(a[d]);return this};a.prototype.onPacket=function(a){if(a.type=="heartbeat")return this.onHeartbeat();if(a.type=="connect"&&a.endpoint=="")this.onConnect();this.socket.onPacket(a);return this};a.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var a=
this;this.closeTimeout=setTimeout(function(){a.onDisconnect()},this.socket.closeTimeout)}};a.prototype.onDisconnect=function(){this.close&&this.close();this.clearTimeouts();this.socket.onDisconnect();return this};a.prototype.onConnect=function(){this.socket.onConnect();return this};a.prototype.clearCloseTimeout=function(){if(this.closeTimeout)clearTimeout(this.closeTimeout),this.closeTimeout=null};a.prototype.clearTimeouts=function(){this.clearCloseTimeout();this.reopenTimeout&&clearTimeout(this.reopenTimeout)};
a.prototype.packet=function(a){this.send(b.parser.encodePacket(a))};a.prototype.onHeartbeat=function(){this.packet({type:"heartbeat"})};a.prototype.onOpen=function(){this.open=!0;this.clearCloseTimeout();this.socket.onOpen()};a.prototype.onClose=function(){this.open=!1;this.setCloseTimeout();this.socket.onClose()};a.prototype.prepareUrl=function(){var a=this.socket.options;return this.scheme()+"://"+a.host+":"+a.port+"/"+a.resource+"/"+b.protocol+"/"+this.name+"/"+this.sessid};a.prototype.ready=function(a,
b){b.call(this)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(d,b,a){function c(c){this.options={port:80,secure:!1,document:"document"in a?document:!1,resource:"socket.io",transports:b.transports,"connect timeout":1E4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3E3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843};b.util.merge(this.options,c);this.reconnecting=this.connecting=this.open=this.connected=!1;this.namespaces={};this.buffer=
[];this.doBuffer=!1;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||b.util.ua.hasCORS)){var f=this;b.util.on(a,"beforeunload",function(){f.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function g(){}d.Socket=c;b.util.mixin(c,b.EventEmitter);c.prototype.of=function(a){this.namespaces[a]||(this.namespaces[a]=new b.SocketNamespace(this,a),a!==""&&this.namespaces[a].packet({type:"connect"}));return this.namespaces[a]};c.prototype.publish=function(){this.emit.apply(this,
arguments);var a,b;for(b in this.namespaces)this.namespaces.hasOwnProperty(b)&&(a=this.of(b),a.$emit.apply(a,arguments))};c.prototype.handshake=function(a){function c(b){if(b instanceof Error)d.onError(b.message);else a.apply(null,b.split(":"))}var d=this,i=this.options,i=["http"+(i.secure?"s":"")+":/",i.host+":"+i.port,this.options.resource,b.protocol,b.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()){var n=document.getElementsByTagName("script")[0],m=document.createElement("script");
m.src=i+"&jsonp="+b.j.length;n.parentNode.insertBefore(m,n);b.j.push(function(a){c(a);m.parentNode.removeChild(m)})}else{var k=b.util.request();k.open("GET",i,!0);k.onreadystatechange=function(){if(k.readyState==4)k.onreadystatechange=g,k.status==200?c(k.responseText):!d.reconnecting&&d.onError(k.responseText)};k.send(null)}};c.prototype.getTransport=function(a){for(var a=a||this.transports,c=0,d;d=a[c];c++)if(b.Transport[d]&&b.Transport[d].check(this)&&(!this.isXDomain()||b.Transport[d].xdomainCheck()))return new b.Transport[d](this,
this.sessionid);return null};c.prototype.connect=function(a){if(this.connecting)return this;var c=this;this.handshake(function(d,g,n,m){function k(a){c.transport&&c.transport.clearTimeouts();c.transport=c.getTransport(a);if(!c.transport)return c.publish("connect_failed");c.transport.ready(c,function(){c.connecting=!0;c.publish("connecting",c.transport.name);c.transport.open();if(c.options["connect timeout"])c.connectTimeoutTimer=setTimeout(function(){if(!c.connected&&(c.connecting=!1,c.options["try multiple transports"])){if(!c.remainingTransports)c.remainingTransports=
c.transports.slice(0);for(var a=c.remainingTransports;a.length>0&&a.splice(0,1)[0]!=c.transport.name;);a.length?k(a):c.publish("connect_failed")}},c.options["connect timeout"])})}c.sessionid=d;c.closeTimeout=n*1E3;c.heartbeatTimeout=g*1E3;c.transports=b.util.intersect(m.split(","),c.options.transports);k();c.once("connect",function(){clearTimeout(c.connectTimeoutTimer);a&&typeof a=="function"&&a()})});return this};c.prototype.packet=function(a){this.connected&&!this.doBuffer?this.transport.packet(a):
this.buffer.push(a);return this};c.prototype.setBuffer=function(a){this.doBuffer=a;if(!a&&this.connected&&this.buffer.length)this.transport.payload(this.buffer),this.buffer=[]};c.prototype.disconnect=function(){this.connected&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted"));return this};c.prototype.disconnectSync=function(){b.util.request().open("GET",this.resource+"/"+b.protocol+"/"+this.sessionid,!0);this.onDisconnect("booted")};c.prototype.isXDomain=function(){var a=
window.location.port||("https:"==window.location.protocol?443:80);return this.options.host!==document.domain||this.options.port!=a};c.prototype.onConnect=function(){if(!this.connected)this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect")};c.prototype.onOpen=function(){this.open=!0};c.prototype.onClose=function(){this.open=!1};c.prototype.onPacket=function(a){this.of(a.endpoint).onPacket(a)};c.prototype.onError=function(a){a&&a.advice&&a.advice==="reconnect"&&
this.connected&&(this.disconnect(),this.reconnect());this.publish("error",a&&a.reason?a.reason:a)};c.prototype.onDisconnect=function(a){var b=this.connected;this.open=this.connecting=this.connected=!1;b&&(this.transport.close(),this.transport.clearTimeouts(),this.publish("disconnect",a),"booted"!=a&&this.options.reconnect&&!this.reconnecting&&this.reconnect())};c.prototype.reconnect=function(){function a(){if(c.connected){for(var d in c.namespaces)c.namespaces.hasOwnProperty(d)&&""!==d&&c.namespaces[d].packet({type:"connect"});
c.publish("reconnect",c.transport.name,c.reconnectionAttempts)}c.removeListener("connect_failed",b);c.removeListener("connect",b);c.reconnecting=!1;delete c.reconnectionAttempts;delete c.reconnectionDelay;delete c.reconnectionTimer;delete c.redoTransports;c.options["try multiple transports"]=g}function b(){if(c.reconnecting){if(c.connected)return a();if(c.connecting&&c.reconnecting)return c.reconnectionTimer=setTimeout(b,1E3);c.reconnectionAttempts++>=d?c.redoTransports?(c.publish("reconnect_failed"),
a()):(c.on("connect_failed",b),c.options["try multiple transports"]=!0,c.transport=c.getTransport(),c.redoTransports=!0,c.connect()):(c.reconnectionDelay<m&&(c.reconnectionDelay*=2),c.connect(),c.publish("reconnecting",c.reconnectionDelay,c.reconnectionAttempts),c.reconnectionTimer=setTimeout(b,c.reconnectionDelay))}}this.reconnecting=!0;this.reconnectionAttempts=0;this.reconnectionDelay=this.options["reconnection delay"];var c=this,d=this.options["max reconnection attempts"],g=this.options["try multiple transports"],
m=this.options["reconnection limit"];this.options["try multiple transports"]=!1;this.reconnectionTimer=setTimeout(b,this.reconnectionDelay);this.on("connect",b)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);
(function(d,b){function a(a,b){this.socket=a;this.name=b||"";this.flags={};this.json=new c(this,"json");this.ackPackets=0;this.acks={}}function c(a,b){this.namespace=a;this.name=b}d.SocketNamespace=a;b.util.mixin(a,b.EventEmitter);a.prototype.$emit=b.EventEmitter.prototype.emit;a.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)};a.prototype.packet=function(a){a.endpoint=this.name;this.socket.packet(a);this.flags={};return this};a.prototype.send=function(a,b){var c={type:this.flags.json?
"json":"message",data:a};if("function"==typeof b)c.id=++this.ackPackets,c.ack=!0,this.acks[c.id]=b;return this.packet(c)};a.prototype.emit=function(a){var b=Array.prototype.slice.call(arguments,1),c=b[b.length-1],d={type:"event",name:a};if("function"==typeof c)d.id=++this.ackPackets,d.ack="data",this.acks[d.id]=c,b=b.slice(0,b.length-1);d.args=b;return this.packet(d)};a.prototype.disconnect=function(){this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect"));
return this};a.prototype.onPacket=function(a){function c(){d.packet({type:"ack",args:b.util.toArray(arguments),ackId:a.id})}var d=this;switch(a.type){case "connect":this.$emit("connect");break;case "disconnect":if(this.name==="")this.socket.onDisconnect(a.reason||"booted");else this.$emit("disconnect",a.reason);break;case "message":case "json":var h=["message",a.data];a.ack=="data"?h.push(c):a.ack&&this.packet({type:"ack",ackId:a.id});this.$emit.apply(this,h);break;case "event":h=[a.name].concat(a.args);
a.ack=="data"&&h.push(c);this.$emit.apply(this,h);break;case "ack":this.acks[a.ackId]&&(this.acks[a.ackId].apply(this,a.args),delete this.acks[a.ackId]);break;case "error":if(a.advice)this.socket.onError(a);else a.reason=="unauthorized"?this.$emit("connect_failed",a.reason):this.$emit("error",a.reason)}};c.prototype.send=function(){this.namespace.flags[this.name]=!0;this.namespace.send.apply(this.namespace,arguments)};c.prototype.emit=function(){this.namespace.flags[this.name]=!0;this.namespace.emit.apply(this.namespace,
arguments)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(d,b){function a(a){b.Transport.apply(this,arguments)}d.websocket=a;b.util.inherit(a,b.Transport);a.prototype.name="websocket";a.prototype.open=function(){var a=b.util.query(this.socket.options.query),d=this,e;e||(e=window.MozWebSocket||window.WebSocket);this.websocket=new e(this.prepareUrl()+a);this.websocket.onopen=function(){d.onOpen();d.socket.setBuffer(!1)};this.websocket.onmessage=function(a){d.onData(a.data)};this.websocket.onclose=function(){d.onClose();d.socket.setBuffer(!0)};this.websocket.onerror=
function(a){d.onError(a)};return this};a.prototype.send=function(a){this.websocket.send(a);return this};a.prototype.payload=function(a){for(var b=0,d=a.length;b<d;b++)this.packet(a[b]);return this};a.prototype.close=function(){this.websocket.close();return this};a.prototype.onError=function(a){this.socket.onError(a)};a.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"};a.check=function(){return"WebSocket"in window&&!("__addTask"in WebSocket)||"MozWebSocket"in window};a.xdomainCheck=
function(){return!0};b.transports.push("websocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(d,b){function a(){b.Transport.websocket.apply(this,arguments)}d.flashsocket=a;b.util.inherit(a,b.Transport.websocket);a.prototype.name="flashsocket";a.prototype.open=function(){var a=this,d=arguments;WebSocket.__addTask(function(){b.Transport.websocket.prototype.open.apply(a,d)});return this};a.prototype.send=function(){var a=this,d=arguments;WebSocket.__addTask(function(){b.Transport.websocket.prototype.send.apply(a,d)});return this};a.prototype.close=function(){WebSocket.__tasks.length=
0;b.Transport.websocket.prototype.close.call(this);return this};a.prototype.ready=function(c,d){function e(){var b=c.options,e=b["flash policy port"],n=["http"+(b.secure?"s":"")+":/",b.host+":"+b.port,b.resource,"static/flashsocket","WebSocketMain"+(c.isXDomain()?"Insecure":"")+".swf"];if(!a.loaded)typeof WEB_SOCKET_SWF_LOCATION==="undefined"&&(WEB_SOCKET_SWF_LOCATION=n.join("/")),e!==843&&WebSocket.loadFlashPolicyFile("xmlsocket://"+b.host+":"+e),WebSocket.__initialize(),a.loaded=!0;d.call(f)}var f=
this;if(document.body)return e();b.util.load(e)};a.check=function(){return typeof WebSocket=="undefined"||!("__initialize"in WebSocket)||!swfobject?!1:swfobject.getFlashPlayerVersion().major>=10};a.xdomainCheck=function(){return!0};typeof window!="undefined"&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0);b.transports.push("flashsocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);
var swfobject=function(){function d(){if(!B){try{var a=l.getElementsByTagName("body")[0].appendChild(l.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}B=!0;for(var a=E.length,c=0;c<a;c++)E[c]()}}function b(a){B?a():E[E.length]=a}function a(a){if(typeof u.addEventListener!=o)u.addEventListener("load",a,!1);else if(typeof l.addEventListener!=o)l.addEventListener("load",a,!1);else if(typeof u.attachEvent!=o)z(u,"onload",a);else if(typeof u.onload=="function"){var b=u.onload;u.onload=
function(){b();a()}}else u.onload=a}function c(){var a=l.getElementsByTagName("body")[0],b=l.createElement(q);b.setAttribute("type",p);var c=a.appendChild(b);if(c){var d=0;(function(){if(typeof c.GetVariable!=o){var e=c.GetVariable("$version");if(e)e=e.split(" ")[1].split(","),j.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]}else if(d<10){d++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;g()})()}else g()}function g(){var a=x.length;if(a>0)for(var b=0;b<a;b++){var c=x[b].id,
d=x[b].callbackFn,g={success:!1,id:c};if(j.pv[0]>0){var k=r(c);if(k)if(s(x[b].swfVersion)&&!(j.wk&&j.wk<312)){if(w(c,!0),d)g.success=!0,g.ref=e(c),d(g)}else if(x[b].expressInstall&&f()){g={};g.data=x[b].expressInstall;g.width=k.getAttribute("width")||"0";g.height=k.getAttribute("height")||"0";if(k.getAttribute("class"))g.styleclass=k.getAttribute("class");if(k.getAttribute("align"))g.align=k.getAttribute("align");for(var l={},k=k.getElementsByTagName("param"),m=k.length,q=0;q<m;q++)k[q].getAttribute("name").toLowerCase()!=
"movie"&&(l[k[q].getAttribute("name")]=k[q].getAttribute("value"));h(g,l,c,d)}else i(k),d&&d(g)}else if(w(c,!0),d){if((c=e(c))&&typeof c.SetVariable!=o)g.success=!0,g.ref=c;d(g)}}}function e(a){var b=null;if((a=r(a))&&a.nodeName=="OBJECT")typeof a.SetVariable!=o?b=a:(a=a.getElementsByTagName(q)[0])&&(b=a);return b}function f(){return!F&&s("6.0.65")&&(j.win||j.mac)&&!(j.wk&&j.wk<312)}function h(a,b,c,d){F=!0;I=d||null;K={success:!1,id:c};var e=r(c);if(e){e.nodeName=="OBJECT"?(D=n(e),G=null):(D=e,G=
c);a.id=L;if(typeof a.width==o||!/%$/.test(a.width)&&parseInt(a.width,10)<310)a.width="310";if(typeof a.height==o||!/%$/.test(a.height)&&parseInt(a.height,10)<137)a.height="137";l.title=l.title.slice(0,47)+" - Flash Player Installation";d=j.ie&&j.win?"ActiveX":"PlugIn";d="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+l.title;typeof b.flashvars!=o?b.flashvars+="&"+d:b.flashvars=d;if(j.ie&&j.win&&e.readyState!=4)d=l.createElement("div"),c+="SWFObjectNew",
d.setAttribute("id",c),e.parentNode.insertBefore(d,e),e.style.display="none",function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}();m(a,b,c)}}function i(a){if(j.ie&&j.win&&a.readyState!=4){var b=l.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(n(a),b);a.style.display="none";(function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(n(a),a)}function n(a){var b=l.createElement("div");
if(j.win&&j.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(q)[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)!(a[d].nodeType==1&&a[d].nodeName=="PARAM")&&a[d].nodeType!=8&&b.appendChild(a[d].cloneNode(!0));return b}function m(a,b,c){var d,e=r(c);if(j.wk&&j.wk<312)return d;if(e){if(typeof a.id==o)a.id=c;if(j.ie&&j.win){var g="",f;for(f in a)if(a[f]!=Object.prototype[f])f.toLowerCase()=="data"?b.movie=a[f]:f.toLowerCase()=="styleclass"?g+=' class="'+a[f]+'"':f.toLowerCase()!="classid"&&
(g+=" "+f+'="'+a[f]+'"');f="";for(var h in b)b[h]!=Object.prototype[h]&&(f+='<param name="'+h+'" value="'+b[h]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+g+">"+f+"</object>";H[H.length]=a.id;d=r(a.id)}else{h=l.createElement(q);h.setAttribute("type",p);for(var i in a)a[i]!=Object.prototype[i]&&(i.toLowerCase()=="styleclass"?h.setAttribute("class",a[i]):i.toLowerCase()!="classid"&&h.setAttribute(i,a[i]));for(g in b)b[g]!=Object.prototype[g]&&g.toLowerCase()!=
"movie"&&(a=h,f=g,i=b[g],c=l.createElement("param"),c.setAttribute("name",f),c.setAttribute("value",i),a.appendChild(c));e.parentNode.replaceChild(h,e);d=h}}return d}function k(a){var b=r(a);if(b&&b.nodeName=="OBJECT")j.ie&&j.win?(b.style.display="none",function(){if(b.readyState==4){var c=r(a);if(c){for(var d in c)typeof c[d]=="function"&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b)}function r(a){var b=null;try{b=l.getElementById(a)}catch(c){}return b}
function z(a,b,c){a.attachEvent(b,c);C[C.length]=[a,b,c]}function s(a){var b=j.pv,a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function t(a,b,c,d){if(!j.ie||!j.mac){var e=l.getElementsByTagName("head")[0];if(e){c=c&&typeof c=="string"?c:"screen";d&&(J=v=null);if(!v||J!=c)d=l.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),v=e.appendChild(d),
j.ie&&j.win&&typeof l.styleSheets!=o&&l.styleSheets.length>0&&(v=l.styleSheets[l.styleSheets.length-1]),J=c;j.ie&&j.win?v&&typeof v.addRule==q&&v.addRule(a,b):v&&typeof l.createTextNode!=o&&v.appendChild(l.createTextNode(a+" {"+b+"}"))}}}function w(a,b){if(M){var c=b?"visible":"hidden";B&&r(a)?r(a).style.visibility=c:t("#"+a,"visibility:"+c)}}function A(a){return/[\\\"<>\.;]/.exec(a)!=null&&typeof encodeURIComponent!=o?encodeURIComponent(a):a}var o="undefined",q="object",p="application/x-shockwave-flash",
L="SWFObjectExprInst",u=window,l=document,y=navigator,N=!1,E=[function(){N?c():g()}],x=[],H=[],C=[],D,G,I,K,B=!1,F=!1,v,J,M=!0,j=function(){var a=typeof l.getElementById!=o&&typeof l.getElementsByTagName!=o&&typeof l.createElement!=o,b=y.userAgent.toLowerCase(),c=y.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!+"\u000b1",g=[0,0,0],f=null;if(typeof y.plugins!=o&&typeof y.plugins["Shockwave Flash"]==
q){if((f=y.plugins["Shockwave Flash"].description)&&!(typeof y.mimeTypes!=o&&y.mimeTypes[p]&&!y.mimeTypes[p].enabledPlugin))N=!0,e=!1,f=f.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),g[0]=parseInt(f.replace(/^(.*)\..*$/,"$1"),10),g[1]=parseInt(f.replace(/^.*\.(.*)\s.*$/,"$1"),10),g[2]=/[a-zA-Z]/.test(f)?parseInt(f.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof u.ActiveXObject!=o)try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(h&&(f=h.GetVariable("$version")))e=!0,f=f.split(" ")[1].split(","),
g=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)]}catch(i){}return{w3:a,pv:g,wk:b,ie:e,win:d,mac:c}}();(function(){j.w3&&((typeof l.readyState!=o&&l.readyState=="complete"||typeof l.readyState==o&&(l.getElementsByTagName("body")[0]||l.body))&&d(),B||(typeof l.addEventListener!=o&&l.addEventListener("DOMContentLoaded",d,!1),j.ie&&j.win&&(l.attachEvent("onreadystatechange",function(){l.readyState=="complete"&&(l.detachEvent("onreadystatechange",arguments.callee),d())}),u==top&&function(){if(!B){try{l.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,
0);return}d()}}()),j.wk&&function(){B||(/loaded|complete/.test(l.readyState)?d():setTimeout(arguments.callee,0))}(),a(d)))})();(function(){j.ie&&j.win&&window.attachEvent("onunload",function(){for(var a=C.length,b=0;b<a;b++)C[b][0].detachEvent(C[b][1],C[b][2]);a=H.length;for(b=0;b<a;b++)k(H[b]);for(var c in j)j[c]=null;j=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(j.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=
d;x[x.length]=e;w(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(j.w3)return e(a)},embedSWF:function(a,c,d,e,g,i,k,l,n,p){var A={success:!1,id:c};j.w3&&!(j.wk&&j.wk<312)&&a&&c&&d&&e&&g?(w(c,!1),b(function(){d+="";e+="";var b={};if(n&&typeof n===q)for(var j in n)b[j]=n[j];b.data=a;b.width=d;b.height=e;j={};if(l&&typeof l===q)for(var r in l)j[r]=l[r];if(k&&typeof k===q)for(var t in k)typeof j.flashvars!=o?j.flashvars+="&"+t+"="+k[t]:j.flashvars=t+"="+k[t];if(s(g))r=m(b,j,c),b.id==
c&&w(c,!0),A.success=!0,A.ref=r;else if(i&&f()){b.data=i;h(b,j,c,p);return}else w(c,!0);p&&p(A)})):p&&p(A)},switchOffAutoHideShow:function(){M=!1},ua:j,getFlashPlayerVersion:function(){return{major:j.pv[0],minor:j.pv[1],release:j.pv[2]}},hasFlashPlayerVersion:s,createSWF:function(a,b,c){if(j.w3)return m(a,b,c)},showExpressInstall:function(a,b,c,d){j.w3&&f()&&h(a,b,c,d)},removeSWF:function(a){j.w3&&k(a)},createCSS:function(a,b,c,d){j.w3&&t(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:a,getQueryParamValue:function(a){var b=
l.location.search||l.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return A(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return A(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(F){var a=r(L);if(a&&D){a.parentNode.replaceChild(D,a);if(G&&(w(G,!0),j.ie&&j.win))D.style.display="block";I&&I(K)}F=!1}}}}();
(function(){if(!window.WebSocket){var d=window.console;if(!d||!d.log||!d.error)d={log:function(){},error:function(){}};swfobject.hasFlashPlayerVersion("10.0.0")?(location.protocol=="file:"&&d.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(b,a,c,d,e){var f=this;f.__id=WebSocket.__nextId++;WebSocket.__instances[f.__id]=f;f.readyState=WebSocket.CONNECTING;f.bufferedAmount=
0;f.__events={};a?typeof a=="string"&&(a=[a]):a=[];setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(f.__id,b,a,c||null,d||0,e||null)})},0)},WebSocket.prototype.send=function(b){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";b=WebSocket.__flash.send(this.__id,encodeURIComponent(b));return b<0?!0:(this.bufferedAmount+=b,!1)},WebSocket.prototype.close=function(){if(!(this.readyState==WebSocket.CLOSED||this.readyState==
WebSocket.CLOSING))this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id)},WebSocket.prototype.addEventListener=function(b,a){b in this.__events||(this.__events[b]=[]);this.__events[b].push(a)},WebSocket.prototype.removeEventListener=function(b,a){if(b in this.__events)for(var c=this.__events[b],d=c.length-1;d>=0;--d)if(c[d]===a){c.splice(d,1);break}},WebSocket.prototype.dispatchEvent=function(b){for(var a=this.__events[b.type]||[],c=0;c<a.length;++c)a[c](b);(a=this["on"+b.type])&&a(b)},
WebSocket.prototype.__handleEvent=function(b){if("readyState"in b)this.readyState=b.readyState;if("protocol"in b)this.protocol=b.protocol;if(b.type=="open"||b.type=="error")b=this.__createSimpleEvent(b.type);else if(b.type=="close")b=this.__createSimpleEvent("close");else if(b.type=="message")b=this.__createMessageEvent("message",decodeURIComponent(b.message));else throw"unknown event type: "+b.type;this.dispatchEvent(b)},WebSocket.prototype.__createSimpleEvent=function(b){if(document.createEvent&&
window.Event){var a=document.createEvent("Event");a.initEvent(b,!1,!1);return a}else return{type:b,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(b,a){if(document.createEvent&&window.MessageEvent&&!window.opera){var c=document.createEvent("MessageEvent");c.initMessageEvent("message",!1,!1,a,null,null,window,null);return c}else return{type:b,data:a,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=
null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(b){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(b)})},WebSocket.__initialize=function(){if(!WebSocket.__flash){if(WebSocket.__swfLocation)window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation;if(window.WEB_SOCKET_SWF_LOCATION){var b=document.createElement("div");b.id="webSocketContainer";b.style.position="absolute";WebSocket.__isFlashLite()?(b.style.left="0px",b.style.top=
"0px"):(b.style.left="-100px",b.style.top="-100px");var a=document.createElement("div");a.id="webSocketFlash";b.appendChild(a);document.body.appendChild(b);swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(a){a.success||d.error("[WebSocket] swfobject.embedSWF failed")})}else d.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf")}},WebSocket.__onFlashInitialized=
function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash");WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var b=0;b<WebSocket.__tasks.length;++b)WebSocket.__tasks[b]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){setTimeout(function(){try{for(var b=WebSocket.__flash.receiveEvents(),a=0;a<b.length;++a)WebSocket.__instances[b[a].webSocketId].__handleEvent(b[a])}catch(c){d.error(c)}},0);return!0},
WebSocket.__log=function(b){d.log(decodeURIComponent(b))},WebSocket.__error=function(b){d.error(decodeURIComponent(b))},WebSocket.__addTask=function(b){WebSocket.__flash?b():WebSocket.__tasks.push(b)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var b=window.navigator.mimeTypes["application/x-shockwave-flash"];return!b||!b.enabledPlugin||!b.enabledPlugin.filename?!1:b.enabledPlugin.filename.match(/flashlite/i)?!0:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||
(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))):d.error("Flash Player >= 10.0.0 is required.")}})();
(function(d,b,a){function c(a){if(a)b.Transport.apply(this,arguments),this.sendBuffer=[]}function g(){}d.XHR=c;b.util.inherit(c,b.Transport);c.prototype.open=function(){this.socket.setBuffer(!1);this.onOpen();this.get();this.setCloseTimeout();return this};c.prototype.payload=function(a){for(var c=[],d=0,g=a.length;d<g;d++)c.push(b.parser.encodePacket(a[d]));this.send(b.parser.encodePayload(c))};c.prototype.send=function(a){this.post(a);return this};c.prototype.post=function(b){function c(){if(this.readyState==
4)if(this.onreadystatechange=g,i.posting=!1,this.status==200)i.socket.setBuffer(!1);else i.onClose()}function d(){this.onload=g;i.socket.setBuffer(!1)}var i=this;this.socket.setBuffer(!0);this.sendXHR=this.request("POST");a.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=d:this.sendXHR.onreadystatechange=c;this.sendXHR.send(b)};c.prototype.close=function(){this.onClose();return this};c.prototype.request=function(a){var c=b.util.request(this.socket.isXDomain()),
d=b.util.query(this.socket.options.query,"t="+ +new Date);c.open(a||"GET",this.prepareUrl()+d,!0);if(a=="POST")try{c.setRequestHeader?c.setRequestHeader("Content-type","text/plain;charset=UTF-8"):c.contentType="text/plain"}catch(g){}return c};c.prototype.scheme=function(){return this.socket.options.secure?"https":"http"};c.check=function(a,c){try{if(b.util.request(c))return!0}catch(d){}return!1};c.xdomainCheck=function(){return c.check(null,!0)}})("undefined"!=typeof io?io.Transport:module.exports,
"undefined"!=typeof io?io:module.parent.exports,this);
(function(d,b){function a(a){b.Transport.XHR.apply(this,arguments)}d.htmlfile=a;b.util.inherit(a,b.Transport.XHR);a.prototype.name="htmlfile";a.prototype.get=function(){this.doc=new ActiveXObject("htmlfile");this.doc.open();this.doc.write("<html></html>");this.doc.close();this.doc.parentWindow.s=this;var a=this.doc.createElement("div");a.className="socketio";this.doc.body.appendChild(a);this.iframe=this.doc.createElement("iframe");a.appendChild(this.iframe);var d=this,a=b.util.query(this.socket.options.query,
"t="+ +new Date);this.iframe.src=this.prepareUrl()+a;b.util.on(window,"unload",function(){d.destroy()})};a.prototype._=function(a,b){this.onData(a);try{var d=b.getElementsByTagName("script")[0];d.parentNode.removeChild(d)}catch(f){}};a.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(a){}this.doc=null;this.iframe.parentNode.removeChild(this.iframe);this.iframe=null;CollectGarbage()}};a.prototype.close=function(){this.destroy();return b.Transport.XHR.prototype.close.call(this)};
a.check=function(){if("ActiveXObject"in window)try{return new ActiveXObject("htmlfile")&&b.Transport.XHR.check()}catch(a){}return!1};a.xdomainCheck=function(){return!1};b.transports.push("htmlfile")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(d,b,a){function c(){b.Transport.XHR.apply(this,arguments)}function g(){}d["xhr-polling"]=c;b.util.inherit(c,b.Transport.XHR);b.util.merge(c,b.Transport.XHR);c.prototype.name="xhr-polling";c.prototype.open=function(){b.Transport.XHR.prototype.open.call(this);return!1};c.prototype.get=function(){function b(){if(this.readyState==4)if(this.onreadystatechange=g,this.status==200)d.onData(this.responseText),d.get();else d.onClose()}function c(){this.onload=g;d.onData(this.responseText);d.get()}
if(this.open){var d=this;this.xhr=this.request();a.XDomainRequest&&this.xhr instanceof XDomainRequest?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=b;this.xhr.send(null)}};c.prototype.onClose=function(){b.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=g;try{this.xhr.abort()}catch(a){}this.xhr=null}};c.prototype.ready=function(a,c){var d=this;b.util.defer(function(){c.call(d)})};b.transports.push("xhr-polling")})("undefined"!=typeof io?
io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);
(function(d,b){function a(a){b.Transport["xhr-polling"].apply(this,arguments);this.index=b.j.length;var d=this;b.j.push(function(a){d._(a)})}d["jsonp-polling"]=a;b.util.inherit(a,b.Transport["xhr-polling"]);a.prototype.name="jsonp-polling";a.prototype.post=function(a){function d(){e();f.socket.setBuffer(!1)}function e(){f.iframe&&f.form.removeChild(f.iframe);try{k=document.createElement('<iframe name="'+f.iframeId+'">')}catch(a){k=document.createElement("iframe"),k.name=f.iframeId}k.id=f.iframeId;
f.form.appendChild(k);f.iframe=k}var f=this,h=b.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var i=document.createElement("form"),n=document.createElement("textarea"),m=this.iframeId="socketio_iframe_"+this.index,k;i.className="socketio";i.style.position="absolute";i.style.top="-1000px";i.style.left="-1000px";i.target=m;i.method="POST";i.setAttribute("accept-charset","utf-8");n.name="d";i.appendChild(n);document.body.appendChild(i);this.form=i;this.area=n}this.form.action=
this.prepareUrl()+h;e();this.area.value=a;try{this.form.submit()}catch(r){}this.iframe.attachEvent?k.onreadystatechange=function(){f.iframe.readyState=="complete"&&d()}:this.iframe.onload=d;this.socket.setBuffer(!0)};a.prototype.get=function(){var a=this,d=document.createElement("script"),e=b.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(this.script)this.script.parentNode.removeChild(this.script),this.script=null;d.async=!0;d.src=this.prepareUrl()+e;d.onerror=function(){a.onClose()};
e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,e);this.script=d};a.prototype._=function(a){this.onData(a);this.open&&this.get();return this};a.check=function(){return!0};a.xdomainCheck=function(){return!0};b.transports.push("jsonp-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(){$(function(){var d,b,a,c,g,e,f,h,i,n,m,k,r;a=new CanvasDrawing("canvas");e=a.canvas.width+0;g=a.canvas.height+0;a.options.lineWidth=50;c="000000,000033,000066,000099,0000CC,0000FF,003300,003333,003366,003399,0033CC,0033FF,006600,006633,006666,006699,0066CC,0066FF,009900,009933,009966,009999,0099CC,0099FF,00CC00,00CC33,00CC66,00CC99,00CCCC,00CCFF,00FF00,00FF33,00FF66,00FF99,00FFCC,00FFFF,330000,330033,330066,330099,3300CC,3300FF,333300,333333,333366,333399,3333CC,3333FF,336600,336633,336666,336699,3366CC,3366FF,339900,339933,339966,339999,3399CC,3399FF,33CC00,33CC33,33CC66,33CC99,33CCCC,33CCFF,33FF00,33FF33,33FF66,33FF99,33FFCC,33FFFF,660000,660033,660066,660099,6600CC,6600FF,663300,663333,663366,663399,6633CC,6633FF,666600,666633,666666,666699,6666CC,6666FF,669900,669933,669966,669999,6699CC,6699FF,66CC00,66CC33,66CC66,66CC99,66CCCC,66CCFF,66FF00,66FF33,66FF66,66FF99,66FFCC,66FFFF,990000,990033,990066,990099,9900CC,9900FF,993300,993333,993366,993399,9933CC,9933FF,996600,996633,996666,996699,9966CC,9966FF,999900,999933,999966,999999,9999CC,9999FF,99CC00,99CC33,99CC66,99CC99,99CCCC,99CCFF,99FF00,99FF33,99FF66,99FF99,99FFCC,99FFFF,CC0000,CC0033,CC0066,CC0099,CC00CC,CC00FF,CC3300,CC3333,CC3366,CC3399,CC33CC,CC33FF,CC6600,CC6633,CC6666,CC6699,CC66CC,CC66FF,CC9900,CC9933,CC9966,CC9999,CC99CC,CC99FF,CCCC00,CCCC33,CCCC66,CCCC99,CCCCCC,CCCCFF,CCFF00,CCFF33,CCFF66,CCFF99,CCFFCC,CCFFFF,FF0000,FF0033,FF0066,FF0099,FF00CC,FF00FF,FF3300,FF3333,FF3366,FF3399,FF33CC,FF33FF,FF6600,FF6633,FF6666,FF6699,FF66CC,FF66FF,FF9900,FF9933,FF9966,FF9999,FF99CC,FF99FF,FFCC00,FFCC33,FFCC66,FFCC99,FFCCCC,FFCCFF,FFFF00,FFFF33,FFFF66,FFFF99,FFFFCC,FFFFFF".split(",");
a.setOption("color","#"+c[Math.floor(Math.random()*c.length)]);k=io.connect();k.on("upload success",function(a){return window.location="http://www.google.com/searchbyimage?nota=1&image_url="+encodeURI(a.imgurl)});r=function(){return k.emit("search",{dataurl:a.canvas.toDataURL("image/png")})};$("#search").click(function(){return r()});$(".color").click(function(){return a.setOption("color","#"+this.getAttribute("data-color"))});h=function(){return navigator.userAgent.indexOf("iPhone")!==-1||navigator.userAgent.indexOf("iPod")!==
-1||navigator.userAgent.indexOf("iPad")!==-1?!0:!1};(function(){var a;a=document.createElement("input");a.setAttribute("type","range");if(a.type!=="range"||h())return $("#range").remove(),$("#rangewrapper").html("<lable>Brush size:&nbsp;</lable><select id=\"range\" style=\"width:70%;\">\n<option value='1'> 1px </option>\n<option value='5'> 5px </option>\n<option value='10'> 10px </option>\n<option value='20'> 20px </option>\n<option value='30'> 30px </option>\n<option value='40'> 40px </option>\n<option value='50' selected> 50px </option>\n<option value='60'> 60px </option>\n<option value='80'> 80px </option>\n<option value='90'> 90px </option>\n<option value='100'> 100px </option>\n<option value='120'> 120px </option>\n<option value='150'> 150px </option>\n<option value='200'> 200px </option>\n </select>")})();
$("#range").change(function(){return a.setOption("lineWidth",this.value)});(navigator.userAgent.indexOf("mobile")!==-1||navigator.userAgent.indexOf("Mobile")!==-1)&&$("h1").after('<div class="warning">Device not supported! <b>:(</b></div>\n<div class="note">Sadly, there is a redirect bug on the <b>Google</b> website for mobile decives. On the <b>Google Search by Image</b> page, Google <b><i>redirects mobile devices from the result page to the Google homepage</i></b>, so you can not view the result of your search. Sorry. The bug is already reported to Google. The only workaround is to use a non mobile browser.</div>');
$("#googlelogo").html('<span style="color: #0140CA;">G</span><span style="color: #DD1812;">o</span><span style="color: #FCCA03;">o</span><span style="color: #0140CA;">g</span><span style="color: #16A61E;">l</span><span style="color: #DD1812;">e</span>');a.canvas.ondragover=function(){this.className="hover";return!1};a.canvas.ondragend=function(){this.className="";return!1};a.canvas.ondrop=function(b){var c;this.className="";b.preventDefault();b=b.dataTransfer.files[0];c=new FileReader;c.onload=function(b){var c;
c=new Image;c.onload=function(){var b,d;c=this;c.width>c.height?(b=c.height*(e/c.width),d=e):(d=c.width*(g/c.height),b=g);return window.setTimeout(function(){a.canvas.width=d;a.canvas.height=b;return a.context.drawImage(c,0,0,d,b)},150)};return c.src=b.target.result};c.readAsDataURL(b);return!1};$("#range").val(50);i=document.createElement("canvas");i.width=320;i.height=240;n=i.getContext("2d");m=n.getImageData(0,0,320,240);d=0;window.passLine=function(b){var c,e,f,g,b=b.split("-");for(f=0;f<320;)c=
parseInt(b[f]),g=c>>16&255,e=c>>8&255,c&=255,m.data[d+0]=g,m.data[d+1]=e,m.data[d+2]=c,m.data[d+3]=255,d+=4,f++;if(d>=307200)return d=0,n.putImageData(m,0,0),a.context.drawImage(i,0,0,a.canvas.width,a.canvas.height)};b=function(){return document.getElementById("embedflash").ccCapture()};$("#takeaphoto").click(function(){b();return document.location="#top"});c=!1;try{(f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))&&(c=!0)}catch(z){navigator.mimeTypes["application/x-shockwave-flash"]!==void 0&&
(c=!0)}if(!c)return $(".withflash").hide()})}).call(this);